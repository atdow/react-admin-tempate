(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{373:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=n(64).c},378:function(e,t,n){"use strict";t.a=n.p+"./fonts/logo.5d5d9eef.svg"},392:function(e,t,n){e.exports={"s-header":"s-header--3xehHd",sHeader:"s-header--3xehHd","avatar-dropdown":"avatar-dropdown--2MT6Is",avatarDropdown:"avatar-dropdown--2MT6Is"}},405:function(e,t,n){},428:function(e,t,n){e.exports={img:"img--2PHdgW"}},429:function(e,t,n){e.exports={"ant-menu-inline-collapsed":"ant-menu-inline-collapsed--2u70Kk",antMenuInlineCollapsed:"ant-menu-inline-collapsed--2u70Kk","ant-layout-sider-children":"ant-layout-sider-children--17pI0X",antLayoutSiderChildren:"ant-layout-sider-children--17pI0X","s-menu":"s-menu--F9F42V",sMenu:"s-menu--F9F42V","s-menu-max":"s-menu-max--2LqM7w",sMenuMax:"s-menu-max--2LqM7w","s-menu-min":"s-menu-min--3CODZA",sMenuMin:"s-menu-min--3CODZA",header:"header--2fPwfO",title:"title--2Z7WtU","title-min":"title-min--3Sm9IF",titleMin:"title-min--3Sm9IF","s-menu-button":"s-menu-button--3vL_Se",sMenuButton:"s-menu-button--3vL_Se",sFold:"sFold--2hzH7U"}},522:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return re}));var a=n(32),r=n.n(a),i=n(45),l=n(46),o=n(73),u=n(71),s=n(47),c=(n(405),n(0)),m=n.n(c),f=n(91),d=n(97),h=n(373),p=n(66),v=n(74),y=n(75),O=(n(388),n(402)),b=n(172),j=n.n(b),E=n(408),g=n.n(E),k=n(413),M=n.n(k),P=n(417),C=n.n(P),w=n(423),S=n.n(w),N=n(378),F=n(428),I=n.n(F);function x(e){return m.a.createElement(m.a.Fragment,null,m.a.createElement("img",{alt:"logo",src:N.a,className:I.a.img}))}var K,L=n(429),B=n.n(L),D=n(523),H=n(524),A=n(525);function W(e){var t=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;n=r()(a,arguments,i)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var R=O.a.SubMenu;var T=Object(h.a)((function(e){var t=e.user;return{count:t.count,menu:t.menu}}),(function(e){return{getPerssionList:e.user.getPerssionList}}))(K=function(e){Object(o.a)(n,e);var t=W(n);function n(e){var a;return Object(i.a)(this,n),a=t.call(this,e),Object(y.a)(Object(v.a)(a),"renderTree",(function(e){return j()(e).call(e,(function(e){var t,n,r,i,l,o;if(e.children){if(null!==(t=e.meta)&&void 0!==t&&t.show)return m.a.createElement(R,{key:e.path,title:null===(n=e.meta)||void 0===n?void 0:n.title,icon:null!==(r=e.meta)&&void 0!==r&&r.icon?m.a.createElement(D.a,null):""},a.renderTree(e.children))}else if(null!==(i=e.meta)&&void 0!==i&&i.show)return m.a.createElement(O.a.Item,{key:e.path,icon:null!==(l=e.meta)&&void 0!==l&&l.icon?m.a.createElement(D.a,null):"",onClick:g()(o=a.menuClick).call(o,Object(v.a)(a),e)},m.a.createElement("span",null,e.meta.title))}))})),Object(y.a)(Object(v.a)(a),"toggleCollapsed",(function(){a.setState({collapsed:!a.state.collapsed})})),a.state={collapsed:!1,formatMenu:[],defaultSelectedKeys:[],defaultOpenKeys:[]},a}return Object(l.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.init(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.init(e)}},{key:"init",value:function(e){var t,n,a=e.menu,r=void 0===a?[]:a,i=this.menuDataFormat(r),l=null===(t=this.props.history)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.pathname,o=this.calDefaultOpenKeys(r,l);this.setState({formatMenu:i,defaultSelectedKeys:[l],defaultOpenKeys:o})}},{key:"menuDataFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=JSON.parse(M()(e));if(0===e.length)return[];C()(t).call(t,(function(e){C()(t).call(t,(function(t){e.parentId===t.id&&(t.children?t.children.push(e):t.children=[e])}))}));var n=S()(t).call(t,(function(e){return 0===e.parentId}));return n}},{key:"calDefaultOpenKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],a="";function r(t){C()(e).call(e,(function(e){e.id===t.parentId&&(n.push(e.path),0!==e.parentId&&r(e))}))}return C()(e).call(e,(function(e){e.path===t&&(a=e)})),r(a),n}},{key:"menuClick",value:function(e){this.props.history.push(e.path)}},{key:"render",value:function(){return m.a.createElement("div",{className:[B.a.sMenu,this.state.collapsed?B.a.sMenuMin:B.a.sMenuMax].join(" ")},m.a.createElement("div",{className:B.a.header},m.a.createElement(x,null),m.a.createElement("h1",{className:[B.a.title,this.state.collapsed?B.a.titleMin:""].join(" ")},"react-admin")),m.a.createElement("div",null,this.state.formatMenu.length&&m.a.createElement(O.a,{defaultOpenKeys:this.state.defaultOpenKeys,defaultSelectedKeys:this.state.defaultSelectedKeys,mode:"inline",theme:"dark",inlineCollapsed:this.state.collapsed},this.renderTree(this.state.formatMenu)),m.a.createElement("div",{className:B.a.sFold,onClick:this.toggleCollapsed},m.a.createElement(this.state.collapsed?H.a:A.a))))}}]),n}(m.a.Component))||K,U=n(392),_=n.n(U),J=(n(430),n(510)),Z=(n(513),n(511)),q=n(171),z=n.n(q),V=n(526),X=n(527),G=n(528);function Q(e){var t=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;n=r()(a,arguments,i)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var Y,$=function(e){Object(o.a)(n,e);var t=Q(n);function n(){var e,a;Object(i.a)(this,n);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return a=t.call.apply(t,z()(e=[this]).call(e,l)),Object(y.a)(Object(v.a)(a),"onMenuClick",(function(e){e.key})),a}return Object(l.a)(n,[{key:"render",value:function(){var e=m.a.createElement(O.a,{className:_.a.menu,selectedKeys:[],onClick:this.onMenuClick},m.a.createElement(O.a.Item,{key:"center"},m.a.createElement(V.a,null),"个人中心"),m.a.createElement(O.a.Item,{key:"settings"},m.a.createElement(X.a,null),"个人设置"),m.a.createElement(O.a.Divider,null),m.a.createElement(O.a.Item,{key:"logout"},m.a.createElement(G.a,null),"退出登录"));return m.a.createElement("div",{className:_.a.avatarDropdown},m.a.createElement(J.a,{overlay:e,placement:"bottomCenter"},m.a.createElement(Z.a,{size:"small",className:_.a.avatar,alt:"avatar"})))}}]),n}(m.a.Component);function ee(e){var t=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;n=r()(a,arguments,i)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var te,ne=Object(h.a)((function(e){var t=e.user;return{count:t.count,menu:t.menu}}),(function(e){return{getPerssionList:e.user.getPerssionList}}))(Y=function(e){Object(o.a)(n,e);var t=ee(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={hasPermission:!1},a}return Object(l.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){return m.a.createElement("div",{className:_.a.sHeader},m.a.createElement($,null))}}]),n}(m.a.Component))||Y;function ae(e){var t=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;n=r()(a,arguments,i)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var re=Object(h.a)((function(e){var t=e.user;return{count:t.count,menu:t.menu}}),(function(e){return{getPerssionList:e.user.getPerssionList}}))(te=function(e){Object(o.a)(n,e);var t=ae(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={hasPermission:!1},a}return Object(l.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.menu,n=this.props.location.pathname;0==t.length?(console.log("请求了权限..."),this.props.getPerssionList().then((function(t){var a=t,r=a.menu,i=void 0===r?[]:r;a.permission;e.judgeHasPermission(i,n)})).catch((function(){e.props.history.push("/user/login")}))):(console.log("缓存的权限..."),this.judgeHasPermission(t,n))}},{key:"judgeHasPermission",value:function(e,t){for(var n=!1,a=0;a<e.length;a++)if(e[a].path===t){n=!0;break}n?this.setState({hasPermission:!0}):this.props.history.push("/user/login")}},{key:"render",value:function(){var e=Object(f.a)(this.props.routes);return m.a.createElement("div",null,this.state.hasPermission&&m.a.createElement("div",{className:"s-security-layout"},m.a.createElement(T,{history:p.a}),m.a.createElement("div",{className:"s-content"},m.a.createElement(ne,{history:p.a}),m.a.createElement("div",{className:"s-content-route"},m.a.createElement(d.d,null,e)))))}}]),n}(m.a.Component))||te}}]);